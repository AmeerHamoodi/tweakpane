{% extends "_template.html" %}

{% set title = 'Monitor' %}

{% block content %}
<p>Tweakpane has a feature for monitoring a property change. Use <code>monitor()</code> to monitor it.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var pane = Tweakpane();
pane.monitor(target, 'wave');</code></pre>
	</div>
	<div class="codeBlock_section codeBlock_section-example">
		<div id="textExample" class="codeBlock_paneContainer"></div>
	</div>
</div>


<h2>Graph</h2>
<p>Tweakpane can draw a graph for a number property. Pass <code>graph</code> option as follows:</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var pane = Tweakpane();
pane.monitor(target, 'wave', {
  graph: true,
  min: -5.0,
  max: +5.0,
  count: 100
});</code></pre>
	</div>
	<div class="codeBlock_section codeBlock_section-example">
		<div id="graphExample" class="codeBlock_paneContainer"></div>
	</div>
</div>

<p><code>min</code> is a minimum value of the graph, <code>max</code> is a maximum value, and <code>count</code> is data count to plot.</p>


<h2>Log</h2>
<p>You can specify <code>count</code> option for a single-line string property. Tweakpane holds a specified count of data.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var pane = Tweakpane();
pane.monitor(target, 'time', {
  count: 10
});</code></pre>
	</div>
	<div class="codeBlock_section codeBlock_section-example">
		<div id="logExample" class="codeBlock_paneContainer"></div>
	</div>
</div>


<h2>Multi-line text</h2>
<p>To monitoring a multi-line string property, enable <code>multiline</code> option.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var pane = Tweakpane();
pane.monitor(target, 'message', {
  multiline: true
});</code></pre>
	</div>
	<div class="codeBlock_section codeBlock_section-example">
		<div id="multilineExample" class="codeBlock_paneContainer"></div>
	</div>
</div>


<h2>Changing monitoring interval</h2>
<p>You can change an interval for monitoring by <code>interval</code> option, in the order of milliseconds. The default value is 100ms.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var pane = Tweakpane();
pane.monitor(target, 'wave', {
  interval: 500,
  label: 'wave (0.5s)'
});
pane.monitor(target, 'wave', {
  interval: 1000,
  label: 'wave (1.0s)'
});</code></pre>
	</div>
	<div class="codeBlock_section codeBlock_section-example">
		<div id="intervalExample" class="codeBlock_paneContainer"></div>
	</div>
</div>
{% endblock %}

{% block script %}
var waveParams = {
	wave: 0
};
var t = 0;
setInterval(function() {
	t += 0.01;
	waveParams.wave = 3.0 * 4.0 / Math.PI * (
		Math.sin(t * 1 * Math.PI) +
		Math.sin(t * 3 * Math.PI) / 3 +
		Math.sin(t * 5 * Math.PI) / 5
	);
}, 1000 / 60);

(function() {
	var pane = Tweakpane({
		foldable: false,
		container: document.getElementById('textExample')
	});
	pane.monitor(waveParams, 'wave');
})();

(function() {
	var pane = Tweakpane({
		foldable: false,
		container: document.getElementById('graphExample')
	});
	pane.monitor(waveParams, 'wave', {
		graph: true,
		min: -5.0,
		max: +5.0,
		count: 200,
		interval: 30
	});
})();

(function() {
	var params = {
		time: ''
	};
	setInterval(function() {
		params.time = String(new Date()).match(/\d{2}:\d{2}:\d{2}/)[0];
	}, 1000);

	var pane = Tweakpane({
		foldable: false,
		container: document.getElementById('logExample')
	});
	pane.monitor(params, 'time', {
		count: 10
	});
})();

(function() {
	var params = {
		json: 'hello\nworld'
	};

	var pane = Tweakpane({
		foldable: false,
		container: document.getElementById('multilineExample')
	});
	pane.monitor(params, 'json', {
		multiline: true
	});
})();

(function() {
	var pane = Tweakpane({
		container: document.getElementById('intervalExample'),
		foldable: false
	});
	pane.monitor(waveParams, 'wave', {
		interval: 500,
		label: 'wave (0.5s)'
	});
	pane.monitor(waveParams, 'wave', {
		interval: 1000,
		label: 'wave (1.0s)'
	});
})();
{% endblock %}
